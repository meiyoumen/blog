## 循环结构是程序中一种很重要的结
其特点是，在给定条件成立时，反复执行某程序段，直到条件不成立为止。给定的条件称为循环条件，反复执行的程序段称为循环体。

C语言提供了多种循环语句，可以组成各种不同形式的循环结构：

- 用goto语句和if语句构成循环；
- 用while语句；
- 用do-while语句；
- 用for语句；

### C语言goto语句以及用goto语句构成循环

goto语句是一种无条件转移语句，与BASIC中的goto语句相似。  
goto 语句的使用格式为：  goto  ==语句标号==;  
其中标号是一个有效的标识符，这个标识符加上一个“:”一起出现在函数内某处，执行goto语句后，程序将跳转到该标号处并执行其后的语句。

另外标号必须与goto语句同处于一个函数中，但可以不在一个循环层中。通常goto语句与if条件语句连用，当满足某一条件时，程序跳到标号处运行。

goto语句通常不用，主要因为它将使程序层次不清，且不易读，但在多层嵌套退出时，用goto语句则比较合理。

【例6-1】用goto语句和if语句构成循环求 1+2+3+......+100的和。


```
main(){
    int i,sum=0;
    i=1;
    loop: if(i<=100){
        sum=sum+i;
        i++;
        goto loop;
    }
    printf("%d\n",sum);
}
```

### while语句的用法
while语句的一般形式为：   
    while(表达式) 语句  
其中表达式是循环条件，语句为循环体。  
while语句的语义是：计算表达式的值，当值为真(非0)时，   执行循环体语句。其执行过程可用下图表示。  
![image](http://www.lvtao.net/content/uploadfile/201404/51293dce23559dcc1fad42dc20daa30620140421041853.gif)

【例6-2】用while语句计算从1加到100的值。用传统流程图和N-S结构流程图表示算法，见图：
![image](http://www.lvtao.net/content/uploadfile/201404/36e37b59af36b736442c1790541911da20140421041853.gif)


```
main(){
    int i,sum=0;
    i=1;
    while(i<=100){
        sum=sum+i;
        i++;
    }
    printf("%d\n",sum);
}
```

【例6-3】统计从键盘输入一行字符的个数。


```
#include <stdio.h>
main(){
    int n=0;
    printf("input a string:\n");
    while(getchar()!='\n') n++;
    printf("%d",n);
}
```


本例程序中的循环条件为getchar()!='\n'，其意义是，，只要从键盘输入的字符不是回车就继续循环。循环体n++完成对输入字符个数计数。从而程序实现了对输入一行字符的字符个数计数。

使用while语句应注意以下两点。

while语句中的表达式一般是关系表达或逻辑表达式，只要表达式的值为真（非0）即可继续循环。

```
main(){
    int a=0,n;
    printf("\n input n:    ");
    scanf("%d",&n);
    while (n--) printf("%d  ",a++);
}
```

本例程序将执行n次循环，每执行一次，n值减1。  
循环体如包括有一个以上的语句，则必须用{}括起来，组成复合语句。

### do-while语句的用法

do-while语句的一般形式为：  

```
do  
    语句  
while(表达式);
```


这个循环与while循环的不同在于：它先执行循环中的语句，然后再判断表达式是否为真，如果为真则继续循环；如果为假，则终止循环。因此，do-while循环至少要执行一次循环语句。其执行过程可用下图表示。

![image](http://www.lvtao.net/content/uploadfile/201404/ad5c6176386569d3ea6af5937236398c20140421041934.gif)

【例6-5】用do-while语句计算从1加到100的值


```
main(){
    int i,sum=0;
    i=1;
    do{
        sum=sum+i;
        i++;
    }
    while(i<=100);
    printf("%d\n",sum);
}
```

同样当有许多语句参加循环时, 要用"{"和"}"把它们括起来。

【例6-6】while和do-while循环比较。

while循环：

```
main(){
    int sum=0,i;
    scanf("%d",&i);
    while(i<=10){
        sum=sum+i;
        i++;
    }
    printf("sum=%d",sum);
}
```

do-while循环：

```
main(){
    int sum=0,i;
    scanf("%d",&i);
    do{
       sum=sum+i;
       i++;
    }
    while(i<=10);
    printf("sum=%d",sum);
}
```

### for语句用法详解

在C语言中，for语句使用最为灵活，它完全可以取代 while 语句。它的一般形式为：  

```
for(表达式1; 表达式2; 表达式3) 
```

它的执行过程如下：
1. 先求解表达式1。
1. 求解表达式2，若其值为真（非0），则执行for语句中指定的内嵌语句，然后执行下面第3）步；若其值为假（0），则结束循环，转到第5）步。
1. 求解表达式3。
1. 转回上面第2）步继续执行。
1. 循环结束，执行for语句下面的一个语句。  

其执行过程可用下图表示。
![image](http://www.lvtao.net/content/uploadfile/201404/b620295ae28afbceeda79cd3836d240f20140421042019.gif)

#### 使用for语句应该注意：

- for循环中的“表达式1（循环变量赋初值）”、“表达式2(循环条件)”和“表达式3（循环变量增量）”都是选择项，即可以缺省，但分号(;)不能缺省。
- 省略了“表达式1（循环变量赋初值）”，表示不对循环控制变量赋初值。
- 省略了“表达式2(循环条件)”，则不做其它处理时便成为死循环。例如：

```
    for( i=1; ; i++ )  sum=sum+i; //死循环
```
相当于：


```
i=1;
while(1){
    sum=sum+i;
    i++;
}
```
省略了“表达式3(循环变量增量)”，则不对循环控制变量进行操作，这时可在语句体中加入修改循环控制变量的语句。例如：

```
for( i=1; i<=100 ; ){
    sum=sum+i;
    i++;
}
```


省略了“表达式1（循环变量赋初值）”和“表达式3（循环变量增量）”。例如：

```
for( ; i<=100 ; ){
    sum=sum+i;
    i++;
}
```
相当于：


```
while(i<=100){
    sum=sum+i;
    i++;
}
```

3个表达式都可以省略。例如：
   
```
for( ; ; )  语句
```

相当于：
    
```
while(1)  语句
```

表达式1可以是设置循环变量的初值的赋值表达式，也可以是其他表达式。例如：

```
for( sum=0; i<=100; i++ )  sum=sum+i;
```

表达式1和表达式3可以是一个简单表达式也可以是逗号表达式。

```
for( sum=0,i=1; i<=100; i++ )  sum=sum+i;
```

或：


```
for( i=0,j=100; i<=100; i++,j-- )  k=i+j;
```

表达式2一般是关系表达式或逻辑表达式，但也可是数值表达式或字符表达式，只要其值非零，就执行循环体。例如：

```
for( i=0; (c=getchar())!=’\n’; i+=c );
```

又如：


```
for( ; (c=getchar())!=’\n’ ; )
    printf("%c",c);
```

## 语言几种循环的比较

概括起来，C语言有四种循环：goto语句构成的循环、while循环、do-while循环和for循环。

四种循环的比较：

- 四种循环都可以用来处理同一个问题，一般可以互相代替。但一般不提倡用goto型循环，不但因为其蹩脚，我们也极力建议不要使用goto语句，尽量使用其他语句代替。
- while和do-while循环，循环体中应包括使循环趋于结束的语句。
- for语句功能最强，也最常用。
- 用while和do-while循环时，循环变量初始化的操作应在while和do-while语句之前完成，而for语句可以在表达式1中实现循环变量的初始化。