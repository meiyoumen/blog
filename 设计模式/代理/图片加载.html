<!--Created by Administrator on 2019/7/5.-->
<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Title</title>
</head>
<body>
<script>

  function loadImg(src) {
    return new Promise((resolve, reject) => {
      const img = document.createElement("img")
      img.src = src
      img.onload = function () {
        return resolve(img)
      }
      img.onerror = function () {
        return reject("图片加载错误！")
      }
    })
  }

  let src = "//static.zcool.cn/git_z/z/common/images/svg/logo.svg"

  const result = loadImg(src);

  result.then((img) => {
    console.log(`${img.width}`)
    return img
  }).then((img) => {
    // 在then方法中，可以直接return数据而不是Promise对象，在后面的then中就可以接收到数据了
    console.log(`${img.height}`)
    return {img, height: 33}
  }).then((img, height) => {
    console.log(img, height) //{img: img, height: 33}
    return img
  }).catch((err) => {
    console.log(err);
  })
</script>
</body>
</html>
