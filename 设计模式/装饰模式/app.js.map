{"version":3,"file":null,"sources":["log.js"],"sourcesContent":["/**\r\n https://juejin.im/post/5cb7cc7e518825329c3eaab0\r\n Decorator 函数签名如下：\r\n @param   target  作用对象\r\n @param   prop    作用的属性名\r\n @param   descriptor  属性描述符\r\n function decorator(target,prop,descriptor){}\r\n\r\n target ： 作用的对象，有如下情况：\r\n   作用于 class 时，target 为该 class 函数\r\n   作用于 class 中的函数、属性 时，target 为该 class 的 prototype 对象\r\n   作用于 对象字面量中的函数、属性 时，target 为该对象\r\n prop ： 描述的属性名，若decorator作用于class时，该参数为空\r\n descriptor ： 属性原本的描述符，该描述符可通过 Object.getOwnPropertyDescriptor() 获取，若decorator作用于class时，该参数为空\r\n */\r\n\r\nlet log = (type) => {\r\n  return (target, name, descriptor) => {\r\n    const method = descriptor.value;\r\n    descriptor.value =  (...args) => {\r\n      console.info(`(${type}) 正在执行: ${name}(${args}) = ?`);\r\n      let ret;\r\n      try {\r\n        ret = method.apply(target, args);\r\n        console.info(`(${type}) 成功 : ${name}(${args}) => ${ret}`);\r\n      } catch (error) {\r\n        console.error(`(${type}) 失败: ${name}(${args}) => ${error}`);\r\n      }\r\n      return ret;\r\n    }\r\n  }\r\n}\r\nclass IronMan {\r\n  @log('IronMan 自检阶段')\r\n  check(){\r\n    return '检查完毕'\r\n  }\r\n  @log('IronMan 攻击阶段')\r\n  attack(){\r\n    return '击倒敌人'\r\n  }\r\n  @log('IronMan 机体报错')\r\n  error(){\r\n    throw 'Something is wrong!'\r\n  }\r\n}\r\n\r\nlet tony = new IronMan()\r\ntony.check()\r\ntony.attack()\r\ntony.error()\r\n\r\n// 输出：\r\n// (IronMan 自检阶段) 正在执行: check() = ?\r\n// (IronMan 自检阶段) 成功 : check() => 检查完毕\r\n// (IronMan 攻击阶段) 正在执行: attack() = ?\r\n// (IronMan 攻击阶段) 成功 : attack() => 击倒敌人\r\n// (IronMan 机体报错) 正在执行: error() = ?\r\n// (IronMan 机体报错) 失败: error() => Something is wrong!\r\n"],"names":["log","type","target","name","descriptor","method","value","args","info","ret","apply","error","IronMan","tony","check","attack"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAgBA,IAAIA,MAAOC,IAAD,IAAU;SACX,CAACC,MAAD,EAASC,IAAT,EAAeC,UAAf,KAA8B;UAC7BC,SAASD,WAAWE,KAA1B;eACWA,KAAX,GAAoB,CAAC,GAAGC,IAAJ,KAAa;cACvBC,IAAR,CAAc,IAAGP,IAAK,WAAUE,IAAK,IAAGI,IAAK,OAA7C;UACIE,GAAJ;UACI;cACIJ,OAAOK,KAAP,CAAaR,MAAb,EAAqBK,IAArB,CAAN;gBACQC,IAAR,CAAc,IAAGP,IAAK,UAASE,IAAK,IAAGI,IAAK,QAAOE,GAAI,EAAvD;OAFF,CAGE,OAAOE,KAAP,EAAc;gBACNA,KAAR,CAAe,IAAGV,IAAK,SAAQE,IAAK,IAAGI,IAAK,QAAOI,KAAM,EAAzD;;aAEKF,GAAP;KATF;GAFF;CADF;IAgBMG,kBACHZ,IAAI,cAAJ,WAIAA,IAAI,cAAJ,WAIAA,IAAI,cAAJ,aATH,MAAMY,OAAN,CAAc;UAEL;WACE,MAAP;;;WAGM;WACC,MAAP;;;UAGK;UACC,qBAAN;;;;;AAIJ,IAAIC,OAAO,IAAID,OAAJ,EAAX;AACAC,KAAKC,KAAL;AACAD,KAAKE,MAAL;AACAF,KAAKF,KAAL;;;;;;;;;;"}